{% set current_lang = request.environ.CKAN_LANG %}
<form class="lang-select" action="{% url_for 'util.internal_redirect' %}" data-module="select-switch" method="POST">
  {{ h.csrf_input() }} 
  <div class="lang-select-container">
    <label for="field-lang-select">
      <span>
        <svg aria-label="{{ _('Language') }}" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M2 12H22M2 12C2 17.5228 6.47715 22 12 22M2 12C2 6.47715 6.47715 2 12 2M22 12C22 17.5228 17.5228 22 12 22M22 12C22 6.47715 17.5228 2 12 2M12 2C14.5013 4.73835 15.9228 8.29203 16 12C15.9228 15.708 14.5013 19.2616 12 22M12 2C9.49872 4.73835 8.07725 8.29203 8 12C8.07725 15.708 9.49872 19.2616 12 22" stroke="#4C669E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </span>
    </label>
    <select id="field-lang-select" class="language-toggle" name="url" data-module="autocomplete" data-module-dropdown-class="lang-dropdown" data-module-container-class="lang-container">
      {% for locale in h.get_available_locales() %}
        <option value="{% url_for h.current_url(), locale=locale.short_name %}" {% if locale.short_name == current_lang %}selected="selected"{% endif %}>
          {{ locale.display_name or locale.english_name }}
        </option>
      {% endfor %}
    </select>
  </div>
  <button class="btn btn-default d-none " type="submit">{{ _('Go') }}</button>
</form>


